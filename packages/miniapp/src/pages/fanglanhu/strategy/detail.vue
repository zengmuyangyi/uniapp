<template>
  <n-list bg-type="none" :down="null" :up="null" height="window">
    <n-list-cell>
      <view class="w-full">
        <swiper
          v-if="data.images"
          style="height: 400rpx; width: 100%"
          circular
          :indicator-dots="false"
          :autoplay="autoplay"
          :interval="interval"
          :duration="duration"
          :current="current"
          @change="handleChange"
        >
          <swiper-item v-for="(item, index) in formatImage(data.images)" :key="index">
            <image :src="item" mode="aspectFill" class="w-full h-400" />
          </swiper-item>
        </swiper>
        <view class="flex mt-20rpx justify-center items-center">
          <view
            v-for="(item, idx) in formatImage(data.images)"
            :key="idx"
            class="w-10 h-10 rounded-full mx-6rpx"
            :style="{
              background:
                current === idx ? `linear-gradient( 315deg, #1DDBF5 0%, #4D91FF 100%)` : '#D1D1D1',
            }"
            style="box-shadow: 0px 2px 14px 3px rgba(71, 71, 71, 0.08)"
          ></view>
        </view>
      </view>
    </n-list-cell>
    <n-list-cell>
      <view class="px-28rpx py-30rpx">
        <view class="text-32 leading-36rpx font-800">{{ data.title }}</view>
        <view class="mt-36rpx">
          <mp-html :content="data.content" class="text-28 leading-48rpx text-#2b2b2b"></mp-html>
        </view>
        <view class="mt-60rpx text-24 leading-41rpx text-#777"
          >å‘è¡¨äº {{ dayjs(data.createTime).format('YYYY-MM-DD') }}</view
        >
      </view>
    </n-list-cell>
  </n-list>
</template>

<script setup>
import dayjs from 'dayjs'
import { formatImage } from '@/service/util'
const data = ref({
  title: 'èŠ³å…°æ¹– æ»¡è¶³äº†æˆ‘å¯¹æ¹¿åœ°çš„æ‰€æœ‰æœŸå¾…ï½',
  user: 'æ˜Ÿæ˜ŸğŸŒŸ',
  avatar: 'https://pqntourism.pcleartv.cn/Fq1ugivn5bYA9QofZgqLvPWLnhKc',
  cover: 'https://pqntourism.pcleartv.cn/Fl3sghoMj7dxNpYoDCsKgsj-SbyS',
  frequency: 263,
  images:
    'https://pqntourism.pcleartv.cn/Fl3sghoMj7dxNpYoDCsKgsj-SbyS,https://pqntourism.pcleartv.cn/Fk93OEvdq069L-2NHa35mzRFf50m,https://pqntourism.pcleartv.cn/Fke16V1BiQZdyyvOFLmVl6Y5zvNE',
  content: `<p>èŠ³å…°æ¹–æ¹¿åœ°å…¬å›­æ–‡åŒ–èµ„æºå¤šæ ·ï¼Œå†…æ¶µä¸°å¯Œï¼Œå†œè€•æ–‡åŒ–ã€æ¹¿åœ°é¥®é£Ÿæ–‡åŒ–ã€æ¹¿åœ°æ°‘é£æ°‘ä¿—ã€æ°´åˆ©æ–‡åŒ–ã€äººæ–‡å†å²æ–‡åŒ–äº’ç›¸èåˆã€å…±ç”Ÿå…±è£ï¼Œå½¢æˆé­…åŠ›å››å°„çš„åœ°åŸŸæ–‡åŒ–ã€‚</p><p>èŠ³å…°æ¹–æ¹¿åœ°å…¬å›­æ­£åœ¨åˆ›å»ºé›†ç”Ÿæ€æ¶µå…»ã€ç§‘æ™®æ•™è‚²ã€äº²æ°´æ¸¸æ†©ã€ä¼‘é—²å¨±ä¹ã€æ–‡åŒ–ä½“éªŒã€å¤œé—´æ¶ˆè´¹ç­‰åŠŸèƒ½äºä¸€ä½“çš„å›½å®¶çº§4Açº§æ—…æ¸¸æ™¯åŒºï¼Œé€šè¿‡ä¸æ–­å®Œå–„æ™¯åŒºæ—…æ¸¸åŸºç¡€æœåŠ¡è®¾æ–½å’ŒæœåŠ¡è´¨é‡ï¼Œå…¨åŠ›æ‰“é€ ç§‘æŠ€åŸæ–°åç‰‡ã€‚</p>`,
  createTime: new Date(),
})
const { indicatorDots, autoplay, interval, duration } = {
  indicatorDots: false,
  autoplay: true,
  interval: 3000,
  duration: 500,
}
const current = ref(0)

const handleChange = (e) => {
  current.value = e.target?.current || 0
}
</script>

<style lang="scss" scoped></style>
